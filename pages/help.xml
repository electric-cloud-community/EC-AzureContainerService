<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta content="text/html; charset=us-ascii" http-equiv="content-type"/>
        <title>EC-AzureContainerService Plugin</title>
        <link rel="stylesheet" href="../../plugins/@PLUGIN_NAME@/pluginhelp.css" type="text/css" media="screen"/>
    </head>
    <body>
        <div class="help">
            <h1>EC-AzureContainerService</h1>
            <p>Plugin version @PLUGIN_VERSION@</p>
            <hr style="margin-left: -10px; margin-top: 10px; height: 1px; width: 100%; color: #5981BD;" noshade="noshade"/>
			<h3>Overview</h3>
			<p>EC-AzureContainerService plugin integrates with the Azure Container Service to run Docker containers on the Azure Cloud Platform using Kubernetes.
			</p>
            <h1>Contents</h1>
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#prerequisites">Prerequisites</a></li>
                <li><a href="#CreateConfiguration">Plugin Configuration</a></li>
                 <li><a href="#procedures">Plugin Procedures</a></li>
                <ul>
                    <li><a href="#ProvisionCluster">Provision cluster</a></li>
                    <li><a href="#DeployService">Deploy service</a></li>
                </ul>
            </ul>
            <h2 id="prerequisites">Prerequisites</h2>
            <ol>
                <li>EC-Kubernetes plugin version 1.0.2.* or higher</li>
            </ol>
            <div id="CreateConfiguration">
                <h2>Plugin Configurations</h2>
                <!-- If the plugin has separate configurations then include
                     this section, otherwise omit this whole section. We don't
                     need to have a configuration section that just says "There
                     is no configuration for this plugin." -->
                <p>
                    Plugin configurations are sets of parameters that apply
                    across some or all of the plugin procedures. They
                    reduce repetition of common values, create
                    predefined parameter sets for end users, and
                    securely store credentials where needed. Each configuration
                    is given a unique name that is entered in designated
                    parameters on procedures that use them.<br /><br />
                </p>
                <!-- For all parameters, the parameter name should be *exactly*
                     the same as it appears in the Parameter Panel, and the first
                     sentence(s) of the description should be the same as the tooltip (if
                     there is one). After that, the parameter description can go into
                     greater detail about the parameter including valid value ranges and
                     examples. -->
                <h3>Creating Plugin Configurations</h3>
                <p>To create plugin configurations in ElectricFlow,
                do these steps:</p>
                
                    <li>Go to <b>Administration</b> &gt; <b>Plugins</b> to open the Plugin Manager.</li>
                    <li>Find the EC-AzureContainerService row.</li>
                    <li>Click <b>Configure</b> to open the
                    EC-AzureContainerService Configurations page.</li>
                    <li>Click <b>Create Configuration</b>.</li>
                    <li>To enable ElectricFlow server to communicate with the Azure Container Service,
                    enter the following information:<br /></li>
                    <table class="grid">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="required">Configuration</td>
                                <td>The name of the configuration to create.</td>
                            </tr>
                            <tr>
                                <td>Description</td>
                                <td>Specifies the description for the configuration.</td>
                            </tr>
                            <tr>
                                <td class="required">Subscription ID</td>
                                <td>This is the subscription ID of the Azure account. On more details please refer to link https://blogs.msdn.microsoft.com/mschray/2015/05/13/getting-your-azure-guid-subscription-id/ for retrieving the subscription ID</td>
                            </tr>
                            <tr>
                                <td>Tenant ID</td>
                                <td rowspan="3"> Please follow the instructions to create the service principal at https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal and based on these three fields can be populated. The "key value" in the document is the password field  needed in config</td>
                            </tr>
                            <tr>
                                <td>Client ID</td>
                            </tr>
                            <tr>
                                <td>Password</td>
                            </tr>
                        </tbody>
                        </table>
            </div>
            <h1 id="procedures">Plugin Procedures</h1>
            <p>
                IMPORTANT: For all parameter descriptions below, required parameters are shown in
                <span class="required">bold italics</span>. Please note that some of names given in ElectricFlow UI will be modified to comply with the naming conventions of Kubernetes. Specifically characters such as "space , _ " will be converted to "-". Such parameters are marked with an asterisk (*).
            </p>
            <div id="ProvisionCluster">
                <h2>Provision Cluster</h2>
                <p>This procedure provisions a cluster.</p>
                <h3>Provision Cluster Parameters</h3>
                <table class="grid">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="required">Configuration</td>
                            <td>The name of an existing configuration which holds all the connection information for Azure Container Engine.</td>
                        </tr>
                        <tr>
                            <td class="required">Container Cluster Name *</td>
                            <td>The name of the cluster that needs to be provisioned.</td>
                        </tr>
                        <tr>
                            <td>Master Zone</td>
                            <td>The primary zone for the cluster. The master zone for a cluster is set at creation time and cannot be updated so this parameter will be ignored if the cluster already exists.</td>
                        </tr>                                      
                        <tr>
                            <td class="required">Resource Group Name*</td>
                            <td>A name under which all infrastructure resources will be created so that they can be managed together as a group</td>
                        </tr>
                        <tr>
                            <td>Orchestrator Type</td>
                            <td>The type of orchestrator to be used for creating the cluster. As of this version only "Kubernetes" is supported.</td>
                        </tr>
                        <tr>
                            <td>Admin User Name</td>
                            <td>Name of admin user if creating windows VMs</td>
                        </tr>
                        <tr>
                            <td>Number Of Master VMs</td>
                            <td>The number of masters to be created in the cluster. Values allowed are 1, 3 or 5 with 1 as default.</td>
                        </tr>
                        <tr>
                            <td>Master DNS Prefix</td>
                            <td>The DNS prefix to be used to create the FQDN of the master</td>
                        </tr>                                                 
                        <tr>
                            <td>Master FQDN</td>
                            <td>FQDN of the master</td>
                        </tr>
                        <tr>
                            <td>Agent Pool Name</td>
                            <td>The name of agent pool in which agents will be created</td>
                        </tr>
                        <tr>
                            <td>Agent Pool Count</td>
                            <td>Number of agents that should be created in the pool</td>
                        </tr>
                        <tr>
                            <td>Agent Pool VM Size</td>
                            <td>Size of the Agent VM. It has to be one of sizes listed here: https://docs.microsoft.com/en-us/azure/virtual-machines/virtual-machines-windows-sizes</td>
                        </tr>
                        <tr>
                            <td>Agent DNS Prefix</td>
                            <td>DNS prefix to be used to create the FQDN of agent pool</td>
                        </tr>
                        <tr>
                            <td >Wait time (in minutes)</td>
                            <td>Number of minutes to wait for cluster creation or update operation to complete. Defaults to 5 minutes.</td>
                        </tr>                                                 
                        <!-- TODO other params -->
                    </tbody>
                </table>
            </div>  
            <div id="DeployService">
                <h2>Deploy service</h2>
                <p>This procedure deploys a service and application to a already provisioned cluster</p>
                <h3>Deploy Service Parameters</h3>
                <table class="grid">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="required">Service Name *</td>
                            <td>The name of the service in ElectricFlow that encapsulates the service to be deployed on the Google container cluster.</td>
                        </tr>
                        <tr>
                            <td class="required">Service Project Name *</td>
                            <td>The name of the project that the service belongs to. In case of an application-level service it also owns the application.</td>
                        </tr>
                        <tr>
                            <td class="required">Application Name *</td>
                            <td>The name of the application that the service belongs to. Not applicable for a top-level service.</td>
                        </tr>
                        <tr>
                            <td class="required">Application Revision ID</td>
                            <td>Revision Id of the application version that the service belongs to.</td>
                        </tr>  
                        <tr>
                            <td class="required">Cluster name *</td>
                            <td>The name of the cluster in ElectricFlow that encapsulates the Google container cluster on which the service is to be deployed.</td>
                        </tr>                        
                        <tr>
                            <td class="required">Cluster or environment project name</td>
                            <td>The name of the project that the cluster belongs to if it is a top-level project cluster. Or the name of the project that the environment belongs to if it is an environment-scoped cluster.</td>
                        </tr>
                        <tr>
                            <td class="required">Environment Name</td>
                            <td>The name of the environment that the cluster belongs to. Not applicable for a top-level project cluster.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <h1 id="releaseNotes">Release Notes</h1>
            <h3>EC-AzureContainerService 1.0.1</h3>
            <ul>
                <li>Updated the <i>Define Service</i> procedure to include namespace and service type parameters. This procedure is an internal procedure used for specifying cluster specific service mappings in ElectricFlow.</li>
                <li>Fixed the <i>Test Connection</i> step in the <i>Create Configuration</i> procedure.</li>
            </ul>
            <h3>EC-AzureContainerService 1.0.0</h3>
            <ul>
                <li>First release.</li>
            </ul>
        </div>
	</body>
</html>	
